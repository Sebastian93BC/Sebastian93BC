[
  {
    "$match": {
      "$and": [
        {
          "$expr": {
            "$eq": [
              "$processName", "{{$json.processName}}"
            ]
          }
        }, {
          "$expr": {
            "$eq": [
              "$processDate", {
                "$toDate": "{{$json.processDate}}"
              }
            ]
          }
        }
      ]
    }
  }, {
    "$group": {
      "_id": {
        "processName": "$processName", 
        "processDate": "$processDate"
      }, 
      "subProcessDate": {
        "$addToSet": "$subProcessDate"
      }
    }
  }, {
    "$unwind": {
      "path": "$subProcessDate"
    }
  }, {
    "$project": {
      "processName": "{{$json.processName}}", 
      "processDate": "{{$json.processDate}}", 
      "subProcessDate": {
        "$substr": [
          {
            "$toString": "$subProcessDate"
          }, 0, 10
        ]
      }, 
      "date": "{{$json.date}}", 
      "offSet": "{{$json.offSet}}", 
      "_id": 0
    }
  }
]